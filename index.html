<!DOCTYPE html>
<html lang="sv">

<head>
    <meta charset="UTF-8" />
    <title>FestQuiz TV</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- TV:n reloadar samma HTML -->
    <meta http-equiv="refresh" content="3">

    <script src="https://cdn.jsdelivr.net/npm/phaser@3/dist/phaser.min.js"></script>

    <style>
        body {
            margin: 0;
            background: #0d0d0d;
        }
    </style>
</head>

<body>
    <script>
        (function () {

            class HostScene extends Phaser.Scene {
                constructor() { super("host"); }
                preload() {
                    this.load.image("hostqr", "{{HOST_QR_SRC}}");
                }
                create() {
                    this.add.image(960, 540, "hostqr").setScale(0.8);
                    this.add.text(960, 200, "FestQuiz – Spelledare", {
                        fontSize: "48px", color: "#ffffff", fontStyle: "bold"
                    }).setOrigin(0.5);
                    this.add.text(960, 880, "Skanna QR-koden för att bli spelledare", {
                        fontSize: "32px", color: "#cccccc"
                    }).setOrigin(0.5);
                }
            }

            class JoinScene extends Phaser.Scene {
                constructor() { super("join"); }
                preload() {
                    this.load.image("playerqr", "{{JOIN_QR_SRC}}");
                }
                create() {
                    this.add.image(960, 540, "playerqr").setScale(0.8);
                    this.add.text(960, 200, "FestQuiz – Gå med", {
                        fontSize: "48px", color: "#ffffff", fontStyle: "bold"
                    }).setOrigin(0.5);
                    this.add.text(960, 880, "Skanna QR-koden för att gå med i spelet", {
                        fontSize: "32px", color: "#cccccc"
                    }).setOrigin(0.5);
                }
            }

            class GameScene extends Phaser.Scene {
                constructor() { super("game"); }
                create() {
                    this.add.text(960, 540, "QUIZET KÖR", {
                        fontSize: "48px", color: "#ffffff"
                    }).setOrigin(0.5);
                }
            }

            class ScoreboardScene extends Phaser.Scene {
                constructor() { super("scoreboard"); }
                create() {
                    this.add.text(960, 540, "RESULTAT", {
                        fontSize: "48px", color: "#ffffff"
                    }).setOrigin(0.5);
                }
            }

            const game = new Phaser.Game({
                type: Phaser.AUTO,
                width: 1920,
                height: 1080,
                backgroundColor: "#0d0d0d",
                scene: [HostScene, JoinScene, GameScene, ScoreboardScene]
            });

            // SCENE KOMMER FRÅN SERVERN
            const sceneToStart = "{{SCENE}}";

            game.events.once(Phaser.Core.Events.READY, () => {
                game.scene.start(sceneToStart);
            });

        })();
    </script>
</body>

</html>