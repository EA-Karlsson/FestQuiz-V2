<!DOCTYPE html>
<html lang="sv">

<head>
    <meta charset="UTF-8" />
    <title>FestQuiz TV</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- TV:n reloadar samma HTML -->
    <meta http-equiv="refresh" content="5">

    <script src="https://cdn.jsdelivr.net/npm/phaser@3/dist/phaser.min.js"></script>
    <style>
        body {
            margin: 0;
            background: #0d0d0d;
        }
    </style>
</head>

<body>
    <script>
        (async function () {
            const params = new URLSearchParams(location.search);
            const room = params.get("room");
            const base = location.origin;

            class HostScene extends Phaser.Scene {
                constructor() { super("host"); }
                preload() {
                    this.load.image("hostqr", "{{HOST_QR_SRC}}");
                }
                create() {
                    this.add.image(960, 540, "hostqr").setScale(0.6);
                }
            }

            class JoinScene extends Phaser.Scene {
                constructor() { super("join"); }
                preload() {
                    this.load.image("playerqr", "{{JOIN_QR_SRC}}");
                }
                create() {
                    this.add.image(960, 540, "playerqr").setScale(0.6);
                }
            }

            class GameScene extends Phaser.Scene {
                constructor() { super("game"); }
                create() {
                    this.add.text(960, 540, "QUIZET KÃ–R", {
                        fontSize: "48px", color: "#ffffff"
                    }).setOrigin(0.5);
                }
            }

            class ScoreboardScene extends Phaser.Scene {
                constructor() { super("scoreboard"); }
                create() {
                    this.add.text(960, 540, "RESULTAT", {
                        fontSize: "48px", color: "#ffffff"
                    }).setOrigin(0.5);
                }
            }

            const game = new Phaser.Game({
                type: Phaser.AUTO,
                width: 1920,
                height: 1080,
                backgroundColor: "#0d0d0d",
                scene: [HostScene, JoinScene, GameScene, ScoreboardScene]
            });

            // Scene sÃ¤tts av servern
            let sceneToStart = "{{SCENE}}";

            // ðŸ”´ VIKTIGT: vÃ¤nta tills Phaser Ã¤r redo
            game.events.once(Phaser.Core.Events.READY, () => {
                game.scene.start(sceneToStart);
            });

    </script>
</body>

</html>